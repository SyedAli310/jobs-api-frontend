<!DOCTYPE html>
<html lang="en" class="has-background-black m-0">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Manage all your potential jobs and their status. All in one place."
    />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css"
    />
    <link rel="stylesheet" href="./css/style.css" />
    <link rel="icon" href="./img/JobEase-logo.png" type="image/x-icon" />
  </head>
  <title>JobEase &#8226; Dash </title>
  <style>
    #filter-sort-form .radio{
      margin-right: 1rem;
      margin-bottom: 00.5rem;
    }
  </style>
  <body class="m-0 p-0">
    <nav
      class="navbar has-background-black-bis is-fixed-top"
      role="navigation"
      aria-label="main navigation"
    >
      <div
        class="
          container
          is-fluid
          is-flex
          is-justify-content-space-between
          is-align-items-center
          has-background-black-bis
          mt-2
        "
      >
        <div class="navbar-brand">
          <a class="is-link" href="/">
            <img src="./img/JobEase-logo.png" width="50" height="50" />
          </a>
        </div>
        <h1 style="color: #296fa8; font-size: x-large; font-family: inherit;">JobEase</h1>
        <div class="dropdown is-right">
          <div class="dropdown-trigger">
            <button
              class="menu has-text-white"
              id="hamburger-icon"
              onclick="this.classList.toggle('opened');this.setAttribute('aria-expanded', this.classList.contains('opened'))"
              aria-label="Main Menu"
              aria-haspopup="true"
              aria-controls="dropdown-menu"
            >
              <svg width="50" height="50" viewBox="0 0 100 100">
                <path
                  class="line line1"
                  d="M 20,29.000046 H 80.000231 C 80.000231,29.000046 94.498839,28.817352 94.532987,66.711331 94.543142,77.980673 90.966081,81.670246 85.259173,81.668997 79.552261,81.667751 75.000211,74.999942 75.000211,74.999942 L 25.000021,25.000058"
                />
                <path class="line line2" d="M 20,50 H 80" />
                <path
                  class="line line3"
                  d="M 20,70.999954 H 80.000231 C 80.000231,70.999954 94.498839,71.182648 94.532987,33.288669 94.543142,22.019327 90.966081,18.329754 85.259173,18.331003 79.552261,18.332249 75.000211,25.000058 75.000211,25.000058 L 25.000021,74.999942"
                />
              </svg>
            </button>
          </div>
          <div class="dropdown-menu mt-4" id="dropdown-menu" role="menu">
            <div
              class="
                dropdown-content
                columns
                p-5
                is-large is-fullwidth
                has-background-black-ter
              "
            >
              <!-- <div class="dropdown-trigger" style="width: min-content !important">
                  <button
                    class="delete has-background-danger"
                    aria-haspopup="true"
                    aria-controls="dropdown-menu"
                  ></button>
                </div> -->
              <div class="column">
                <div
                  class="box mx-0 is-shadowless is-fullwidth is-rounded"
                  style="
                    background-color: transparent;
                    outline: 1px solid #296fa8;
                    font-size: x-large;
                  "
                >
                  <h1
                    class="
                      has-text-centered has-text-white has-text-weight-bold
                    "
                    id="dyn-text"
                  >
                    Get started
                  </h1>
                </div>

                <div class="columns">
                  <div
                    class="dropdown-item is-large is-fullwidth column is-full"
                  >
                    <a href="/" class="navbar-item"> Home </a>

                    <a href="/explore.html" class="navbar-item"> Explore </a>

                    <a href="#" class="navbar-item"> Feedback </a>
                    <hr class="dropdown-divider" />
                    <div
                      class="
                        navbar-item
                        login-join
                        is-flex is-justify-content-space-around
                      "
                    >
                      <div class="buttons is-flex-wrap-nowrap" id="dyn-btns">
                        <a
                          href="./register.html"
                          class="button is-success is-medium"
                        >
                          <strong>Join</strong>
                        </a>
                        <a
                          href="./login.html"
                          class="button is-light is-medium"
                        >
                          <strong>Login</strong>
                        </a>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </nav>
    <main class="container is-fluid">
      <section class="hero is-small has-text-white">
        <div class="hero-body">
          <div class="is-flex mb-6" style="gap: 10px">
            <h1 class="has-text-white" style="font-size: xx-large">
              Dashboard
            </h1>
            <span id="username-dash" style="color: #fff"></span>
          </div>

          <div class="mb-5 has-text-centered" id="add-job-btn-div">
            <a
              href="javascript:void(0)"
              class="button is-success modal-open-cst my-2"
            >
              <ion-icon
                name="bag-add-outline"
                style="font-size: larger"
              ></ion-icon
              >&nbsp;Add new Job
            </a>
            <a
              href="/explore.html"
              class="button is-info my-2"
            >
              <ion-icon
                name="eye-outline"
                style="font-size: larger"
              ></ion-icon
              >&nbsp;Explore Jobs
            </a>
          </div>
          <div class="all-jobs-header mb-6 is-flex is-align-items-center is-justify-content-space-between is-flex-wrap-wrap" style="gap: 0.5rem;"></div>
          <div
            class="
              is-flex
              is-justify-content-flex-start
              is-align-content-center
              is-flex-wrap-wrap
            "
            id="all-jobs-div"
          ></div>
        </div>
      </section>
    </main>

    <!-- modals -->

    <div class="modal add-job-modal">
      <div class="modal-background"></div>
      <div
        class="modal-card has-shadow"
        style="border: 1px solid #3EC487; border-radius: 8px"
      >
        <header class="modal-card-head has-background-black-bis">
          <p class="modal-card-title has-text-success">Add new job...</p>
          <button
            class="modal-close-cst delete has-background-danger"
            aria-label="close"
          ></button>
        </header>
        <section class="modal-card-body has-background-black-bis">
          <form id="add-job-form">
            <div class="field is-horizontal">
              <div class="field-body">
                <div class="field">
                  <label class="label has-text-success has-text-weight-bold">company</label>
                  <div class="control">
                    <input
                      class="input is-success has-background-grey-darker has-text-white"
                      type="text"
                      id="add-job-company"
                      placeholder="google, netflix, microsoft..."
                      required
                    />
                  </div>
                </div>

                <div class="field">
                  <label class="label has-text-success has-text-weight-bold">position</label>
                  <div class="control">
                    <input
                      class="input is-success has-background-grey-darker has-text-white"
                      type="text"
                      id="add-job-pos"
                      placeholder="intern, manager..."
                      required
                    />
                  </div>
                </div>
              </div>
            </div>
            <div class="field">
              <label class="label has-text-success has-text-weight-bold">link</label>
              <div class="control">
                <input
                  class="input is-success has-background-grey-darker has-text-white"
                  type="text"
                  id="add-job-link"
                  placeholder="https://somejob.com"
                  required
                />
              </div>
            </div>
            <div class="field has-text-centered">
                <label class="label has-text-success has-text-weight-bold">status</label>
                <div class="control">
                    <div class="select is-success">
                        <select class="has-background-grey-darker has-text-white" id="add-job-status" required>
                          <option>pending</option>
                          <option>interview</option>
                          <option>declined</option>
                        </select>
                      </div>
                </div>
              </div>
        </section>
        <footer class="modal-card-foot has-background-black-bis">
          <button class="button is-success ml-auto" type="submit" id="add-job-btn">
            <ion-icon name="bag-add-outline"></ion-icon>&nbsp;Add
          </button>
          <button class="button is-dark modal-close-cst">Cancel</button>
        </footer>
    </form>
      </div>
    </div>

    <div class="modal update-job-modal">
      <div class="modal-background"></div>
      <div
        class="modal-card has-shadow"
        style="border: 1px solid #296fa8; border-radius: 8px"
      >
        <header class="modal-card-head has-background-black-bis">
          <p class="modal-card-title has-text-info">Update job...</p>
          <button
            class="modal-close-upd delete has-background-danger"
            aria-label="close"
          ></button>
        </header>
        <section class="modal-card-body has-background-black-bis">
          <form id="update-job-form">
            <div class="field is-horizontal">
              <div class="field-body">
                <div class="field">
                  <label class="label has-text-info has-text-weight-bold">company</label>
                  <div class="control">
                    <input
                      class="input is-info has-background-grey-darker has-text-white"
                      type="text"
                      id="update-job-company"
                      placeholder="google, netflix, microsoft..."
                    />
                  </div>
                </div>

                <div class="field">
                  <label class="label has-text-info has-text-weight-bold">position</label>
                  <div class="control">
                    <input
                      class="input is-info has-background-grey-darker has-text-white"
                      type="text"
                      id="update-job-pos"
                      placeholder="intern, manager..."
                    />
                  </div>
                </div>
              </div>
            </div>
            <div class="field">
              <label class="label has-text-info has-text-weight-bold">link</label>
              <div class="control">
                <input
                  class="input is-info has-background-grey-darker has-text-white"
                  type="text"
                  id="update-job-link"
                  placeholder="https://somejob.com"
                />
              </div>
            </div>
            <div class="field has-text-centered">
                <label class="label has-text-info has-text-weight-bold">status</label>
                <div class="control">
                    <div class="select is-info">
                        <select class="has-background-grey-darker has-text-white" id="update-job-status">
                          <option>pending</option>
                          <option>interview</option>
                          <option>declined</option>
                        </select>
                      </div>
                </div>
              </div>
        </section>
        <footer class="modal-card-foot has-background-black-bis">
          <button class="button is-info ml-auto" type="submit" id="update-job-btn">
            <ion-icon name="bag-outline"></ion-icon>&nbsp;update
          </button>
          <button class="button is-dark modal-close-upd">close</button>
        </footer>
    </form>
      </div>
    </div>

    <div class="modal" id="confirm-msg-modal">
        <div class="modal-background"></div>
        <div
          class="modal-card has-shadow"
          style="border: 1px solid #F03A5F; border-radius: 8px"
        >
          <header class="modal-card-head has-background-black-bis">
            <p class="modal-card-title has-text-danger">Confirm?</p>
            <button
              class="confirm-modal-close delete has-background-danger"
              aria-label="close"
            ></button>
          </header>
          <section class="modal-card-body has-background-black-bis">
            <p class="has-text-white">Are you sure you want to delete this job?</p>
          </section>
          <footer class="modal-card-foot has-background-black-bis">
            <button class="button is-danger ml-auto" id="delete-job-btn">
              <ion-icon name="bag-remove-outline"></ion-icon>&nbsp;delete
            </button>
            <button class="button is-dark confirm-modal-close">cancel</button>
          </footer>
        </div>
      </div>

    <div class="modal" id="filter-sort-modal">
        <div class="modal-background"></div>
        <div
          class="modal-card has-shadow"
          style="border: 1px solid #fff; border-radius: 8px; min-height: unset !important;"
        >
          <header class="modal-card-head has-background-black-bis">
            <p class="modal-card-title has-text-info">Filters & Sort</p>
            <button
              class="filter-sort-modal-close delete has-background-danger"
              aria-label="close"
            ></button>
          </header>
          <section class="modal-card-body has-background-black-bis">
            <div>
              <form id='filter-sort-form'>
                <div>
                    <p class='has-text-white mb-2'>Filter by status</p>
                    <label class="checkbox">
                      <input type="checkbox" value="pending">
                      <span>pending</span>
                    </label>
                    <label class="checkbox">
                      <input type="checkbox" value="interview">
                      <span>interview</span>
                    </label>
                    <label class="checkbox">
                      <input type="checkbox" value="declined">
                      <span>declined</span>
                    </label>
                  </div>
                  <div class="mt-4">
                    <p class='has-text-white mb-2'>Sort By</p>
                    <div class="control">
                      <label class="radio">
                        <input type="radio" name="sortFilter" value="-createdAt" checked>
                        Newest
                      </label>
                      <label class="radio">
                        <input type="radio" name="sortFilter" value="createdAt">
                        Oldest
                      </label>
                      <br>
                      <label class="radio">
                        <input type="radio" name="sortFilter" value="updatedAt">
                        Oldest Updated
                      </label>
                      <label class="radio">
                        <input type="radio" name="sortFilter" value="-updatedAt">
                        Latest Updated
                      </label>
                    </div>
                    <div class="control">
                      <label class="radio">
                        <input type="radio" name="sortFilter" value="company">
                        Company[A-Z]
                      </label>
                      <label class="radio">
                        <input type="radio" name="sortFilter" value="-company">
                        Company[Z-A]
                      </label>
                      <br>
                      <label class="radio">
                        <input type="radio" name="sortFilter" value="position">
                        Position[A-Z]
                      </label>
                      <label class="radio">
                        <input type="radio" name="sortFilter" value="-position">
                        Position[Z-A]
                      </label>
                    </div>
                  </div>
                  <button type='submit' class="button is-small is-info ml-auto mt-4" id="filter-sort-submit-btn">
                    <ion-icon name="checkmark-outline"></ion-icon>&nbsp;apply
                  </button>
              </form>    
            </div>
          </section>
          <footer class="modal-card-foot has-background-black-bis">
            <button class="button is-dark filter-sort-modal-close ml-auto">cancel</button>
          </footer>
        </div>
      </div>

  </body>

  <!-- jQuery library -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

  <!-- Popper JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>

  <!--Ion icons CDN-->
  <script
    type="module"
    src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"
  ></script>
  <script
    nomodule
    src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"
  ></script>

  <!-- Custom JavaScript -->
  <script src="./js/app.js"></script>
  <script>
    localStorage.getItem("loggedUser")
      ? $("#username-dash").html(
          `Hi, <span style='color:#296fa8;'>${localStorage.getItem(
            "loggedUser"
          )}</span>`
        )
      : "";
    window.onload = getJobs();
    document.title += localStorage.getItem('loggedUser') ? ` / ${localStorage.getItem('loggedUser')}` : ''
  </script>
</html>
